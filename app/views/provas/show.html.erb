<div class="space-y-6">
  <div>
    <%= link_to "← Voltar para o dashboard", dashboard_path, class: "text-sm font-semibold text-slate-700 hover:text-slate-900" %>
  </div>

  <div class="flex items-end justify-between gap-4">
    <div>
      <p class="text-sm font-semibold text-slate-600">Prova</p>
      <h1 class="mt-2 text-2xl font-bold tracking-tight text-slate-900"><%= @prova.titulo %></h1>
      <p class="mt-1 text-slate-600">Criada em <span class="font-semibold text-slate-900"><%= l(@prova.data_criacao) %></span></p>
      <% if @prova.aluno.present? %>
        <p class="mt-1 text-slate-600">
          Aluno: <span class="font-semibold text-slate-900"><%= @prova.aluno.ra %></span>
          <span class="text-slate-500">—</span>
          <span class="font-semibold text-slate-900"><%= @prova.aluno.nome %></span>
        </p>
        <% score = @prova.calcular_score %>
        <% max_score = @prova.calcular_score_maximo %>
        <% percentage = @prova.calcular_percentual %>
        <% if max_score > 0 %>
          <p class="mt-2 text-sm text-slate-600">
            Pontuação: <span class="font-semibold text-slate-900"><%= score.round(2) %> / <%= max_score.round(2) %></span>
            <span class="text-slate-500">—</span>
            <span class="font-semibold <%= percentage >= 70 ? 'text-green-600' : percentage >= 50 ? 'text-yellow-600' : 'text-rose-600' %>"><%= percentage %>%</span>
          </p>
        <% end %>
      <% end %>
    </div>
    <div class="flex gap-2">
      <%= link_to "Voltar", provas_path, class: "inline-flex items-center justify-center rounded-xl border border-slate-300/80 bg-white px-4 py-2 text-sm font-semibold text-slate-900 shadow-sm transition hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-slate-300 focus:ring-offset-2" %>
      <%= link_to "Editar", edit_prova_path(@prova), class: "inline-flex items-center justify-center rounded-xl border border-slate-300/80 bg-white px-4 py-2 text-sm font-semibold text-slate-900 shadow-sm transition hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-slate-300 focus:ring-offset-2" %>
      <%= button_to "Excluir", prova_path(@prova), method: :delete, data: { turbo_confirm: "Tem certeza?" }, class: "inline-flex items-center justify-center rounded-xl border border-rose-200 bg-rose-50 px-4 py-2 text-sm font-semibold text-rose-800 shadow-sm transition hover:bg-rose-100 focus:outline-none focus:ring-2 focus:ring-rose-300 focus:ring-offset-2" %>
    </div>
  </div>

  <div class="grid grid-cols-1 gap-4 md:grid-cols-2">
    <div class="rounded-2xl border border-slate-200/80 bg-white p-6 shadow-sm ring-1 ring-black/5">
      <p class="text-sm font-semibold text-slate-900">Questões</p>
      <p class="mt-1 text-sm text-slate-600">Crie e edite as questões desta prova.</p>
      <p class="mt-3 text-sm text-slate-600">
        Total: <span class="font-semibold text-slate-900"><%= @prova.questoes.size %></span>
      </p>

      <div class="mt-4 flex flex-wrap gap-2">
        <%= link_to "Ver questões", prova_questoes_path(@prova), class: "inline-flex items-center justify-center rounded-xl border border-slate-300/80 bg-white px-4 py-2 text-sm font-semibold text-slate-900 shadow-sm transition hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-slate-300 focus:ring-offset-2" %>
        <%= link_to "Criar questão", new_prova_questao_path(@prova), class: "inline-flex items-center justify-center rounded-xl bg-gradient-to-r from-indigo-600 to-sky-600 px-4 py-2 text-sm font-semibold text-white shadow-sm shadow-indigo-200/60 transition hover:-translate-y-0.5 hover:shadow-md focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:ring-offset-2" %>
      </div>
    </div>

    <div class="rounded-2xl border border-slate-200/80 bg-white p-6 shadow-sm ring-1 ring-black/5">
      <p class="text-sm font-semibold text-slate-900">Gabarito</p>
      <p class="mt-1 text-sm text-slate-600">Defina as respostas corretas para a correção.</p>
      <p class="mt-3 text-sm text-slate-600">
        Itens: <span class="font-semibold text-slate-900"><%= @prova.gabaritos.size %></span>
      </p>

      <div class="mt-4 flex flex-wrap gap-2">
        <%= link_to "Preencher gabarito", prova_gabarito_path(@prova), class: "inline-flex items-center justify-center rounded-xl bg-gradient-to-r from-indigo-600 to-sky-600 px-4 py-2 text-sm font-semibold text-white shadow-sm shadow-indigo-200/60 transition hover:-translate-y-0.5 hover:shadow-md focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:ring-offset-2" %>
      </div>
    </div>
  </div>
</div>
